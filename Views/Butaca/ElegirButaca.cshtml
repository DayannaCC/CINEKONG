
<link rel="stylesheet" href="~/css/styleButaca.css" />

@{
    var Lista = ViewBag.butacas;
    char[] alpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray();
    int _ind = 0;
}

<h1>SELECCIONA TUS BUTACAS</h1>
<h2 class="ww">@ViewData["Title"]</h2>
<br>

<script type="text/javascript">
    function obtenerAncho() {
        document.getElementById('screen').setAttribute('style', 'width:' + document.getElementById('tabla').offsetWidth + 'px')
    }
    window.onload = obtenerAncho;

    function xd(a) {
        //console.log(a);
        //console.log($(a).attr("data-estado"));
        //alert($(a).attr("data-estado"));

        if ($(a).attr("data-tipo")=="tradicional") {
            document.getElementById("Mtext").innerHTML = "La butaca " + $(a).attr("data-idbut") + " esta " + $(a).attr("data-estado");
        } else {
            document.getElementById("Mtext").innerHTML = "La butaca " + $(a).attr("data-idbut") + " no esta disponible.";
        }

        $('#myModal').modal('show');


    }
</script>

<div class="row text-center">
    <div class="col-md-12">
        <img id="screen" src="~/images/screen.png">
    </div>
</div>

<br />

<table id="tabla">
    <tr>
        @for (var i = 0; i < Lista.Count; i++)
        {
            @if (i % 18 == 0 && i != 0)
            {
                _ind++;
            @:</tr><tr><td class="container-fluid xd fila"><span class="centered ww">
            @alpha[_ind]
            @:</span></td>
            }
            @if (i == 0)
            {
                <td class="container-fluid xd fila">
                    <span class="centered ww">@alpha[_ind]</span>
                </td>
            }
            <td class="container-fluid xd" data-estado="@Lista[i].estbut" data-tipo="@Lista[i].tipbut" data-idbut="@Lista[i].idbut" onclick="xd(this)">
                @if (Lista[i].tipbut == "tradicional")
                {
                    if (Lista[i].estbut == "disponible")
                    {
                        <img class="centered" src="~/images/seat_0.png">
                        <span class="centered">@Lista[i].idbut.Substring(1)</span>
                    }
                    else if (Lista[i].estbut == "ocupada")
                    {
                        <img class="centered" src="~/images/seat_1.png">
                        <span class="centered w">@Lista[i].idbut.Substring(1)</span>
                    }
                }
                else
                {
                    <img class="centered" src="~/images/seat_3.png">
                    <span class="centered w">@Lista[i].idbut.Substring(1)</span>
                }
            </td>
        }
    </tr>



</table>
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title text-center">Aviso</h3>
            </div>
            <div class="modal-body text-center" id="Mtext">
                <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">Aceptar</button>
            </div>
        </div>
    </div>
</div>

<br />
<br />

<div class="container-fluid">
    <div class="row">
        <div class="col-md-1">
            <img src="~/images/seat_2.png" />
        </div>
        <div class="col-md-3 ww">
            Su asiento
        </div>
        <div class="col-md-1">
            <img src="~/images/seat_0.png" />
        </div>
        <div class="col-md-3 ww">
            Disponible
        </div>
        <div class="col-md-1">
            <img src="~/images/seat_1.png" />
        </div>
        <div class="col-md-3 ww">
            Ocupado
        </div>
    </div>
</div>

